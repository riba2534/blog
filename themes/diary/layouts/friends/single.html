{{ define "main" }}

<div id="content">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            {{ $post_class := "post-head-wrapper-text-only"}}
            {{ $featured_image := .Params.featured_image }}
            {{ if $featured_image }}
            {{ $post_class = "post-head-wrapper"}}
            {{ end }}

            <div class="{{$post_class}}" {{ if $featured_image }} {{ $image :=.Resources.GetMatch
                (.Params.featured_image) }} {{ if $image }} style="background-image: url('{{$image.Permalink }}')" {{
                else }} style="background-image: url('{{ $featured_image | absURL }}')" {{ end }} {{ end }}>
                <div class="post-title">
                    {{ .Title }}
                    {{ if .Params.description }}
                    <div class="post-subtitle">
                        {{ .Params.description }}
                    </div>
                    {{ end }}
                </div>
            </div>

            <div class="post-body-wrapper">
                <div class="post-body">
                    <div class="friends-grid">
                        {{ range .Site.Data.friends }}
                        <a class="friend-card" href="{{ .url }}" target="_blank" rel="noopener noreferrer">
                            <img src="{{ .avatar }}" alt="{{ .name }}" loading="lazy" class="friend-avatar">
                            <div class="friend-info">
                                <p class="friend-name">{{ .name }}</p>
                                <p class="friend-desc">{{ .description }}</p>
                            </div>
                        </a>
                        {{ end }}
                    </div>
                </div>
            </div>

            <div class="post-body-wrapper">
                <div class="post-body">
                    {{.Content}}
                    {{ if not .Lastmod.IsZero }}
                    <hr class="post-divider" id="EOF">
                    <p class="post-last-mod">{{ i18n "last_mod_on" .Page.Lastmod }}</p>
                    {{ end }}
                </div>

                <div class="post-comment-wrapper">
                    {{ if eq .Params.comment false }}
                    <p style="opacity: 0.6" align="center">
                        <small>{{ i18n "comments_disabled" }}</small>
                    </p>
                    {{ else }}
                    {{- partial "comment.html" . -}}
                    {{ end }}
                </div>
            </div>
        </div>
    </div>
{{ end }}
